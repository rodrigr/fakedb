<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Vue</title>  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <style type="text/css">
       .pic{
        width: 100px;
       }
       #logo{
        width: 75px;
       }
    </style>
    </head>
    
        
    <body>


        <div id="app" class="container">
            <nav class="navbar sticky-top navbar-light bg-light navbar-expand-md">
                <img id="logo" class="rounded-circle" src="img/start_logo.png" alt="logo">
                <a class="navbar-brand ml-4" href="#">    
                  <h1 class="d-inline ">Vue</h1>
                  <span class="d-none d-md-inline"> | Componentes </span>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>

                <div class="collapse navbar-collapse " id="navbarToggler">
                  <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                    <li class="nav-item active">
                      <a class="nav-link" href="index.html">Refresh <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item active">
                      <a class="nav-link" href="#" data-toggle="modal" data-target="#references">References</a>
                    </li>
                  </ul>
                </div>
              </nav>
           
            

        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    	<script>
            const app = new Vue({
                el: '#app',
                data:{
                    url: "https://raw.githubusercontent.com/rodrigr/myfakedb/master/db.json",
                    init: {
                        method: 'GET',
                    },
                    students: [],
                    teams: []
                },
                created(){
                    fetch(this.url, this.init)
                    .then(function(res){
                        if(res.ok){
                            return res.json()
                        } else{
                            throw new Error(res.status)
                        }
                    })
                    .then(function(json){
                        app.students = json.students
                        app.teams = app.getKeyValue(json.students,"team")
                    })
                    .catch(function(error){
                        console.log(error)
                    })
                },
                methods:{
                    toPhrase(string){
                        if(string.length > 1){
                            return string.split("_").map(e => e[0].toUpperCase() + e.slice(1)).join(" ")
                        }else{
                            return string[0].toUpperCase() + string.slice(1)
                        }
                    },
                    getKeyValue(array,key){
                        let result = []
                        array.forEach(e => !result.includes(e[key]) ? result.push(e[key]) : null)

                        return result
                    }
                },
                computed:{
                    filterStudents(){
                        return this.students.filter(e => app.teams.includes(e.team))
                    }
                },
                components: {
                    std:{
                        props: ["name","note","index"],
                        template: `
                                    <div class='std'>
                                    <p>{{index}}</p>
                                    <p>Name: {{name}}</p>
                                    <p>Note: {{note}}</p>
                                    </div>
                        `
                    }
                }
            })
        </script>
</body>
</html>